<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>金零社 - 主题社交平台</title>
    <!-- SEO 优化 meta 标签 -->
    <meta name="description" content="金零社 - 专业主题社交平台，为用户提供基于兴趣爱好的社交服务">
    <meta name="keywords" content="金零社,主题社交,兴趣社区,星座,生肖,话题讨论">
    <meta name="author" content="金零社">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="金零社 - 主题社交平台">
    <meta property="og:description" content="金零社专注于提供专业的主题社交服务，让用户基于共同兴趣爱好建立连接">
    <meta property="og:type" content="website">
    <meta property="og:image" content="index.png">
    <meta property="og:url" content="">
    <!-- 移动端优化 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="金零社">
    <!-- 浏览器图标 -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="avatar.jpg">
    <!-- 预加载关键资源 -->
    <link rel="preload" href="element/font-awesome.css" as="style">
    
    <!-- 引入本地资源 -->
    <link href="element/font-awesome.css" rel="stylesheet">
    
    <!-- 使用本地Inter字体替代Google Fonts -->
    <link href="fonts/inter.css" rel="stylesheet">
    
    <!-- 使用本地TailwindCSS替代CDN -->
    <link href="css/tailwind.min.css" rel="stylesheet">
    
    <!-- 可选的Chart.js，使用轻量级替代方案 -->
    <!-- 移除外部Chart.js依赖，改为使用按需加载或轻量级替代方案 -->
    <script>
        // 提供一个简单的Chart.js兼容层，避免代码错误
        window.Chart = window.Chart || function() { return { destroy: function() {} }; };
        window.Chart.defaults = {};
    </script>
    
    <!-- 本地资源优化提示 -->
    <div id="local-resource-info" class="fixed top-4 right-4 bg-dark/90 text-white px-4 py-3 rounded-lg shadow-lg z-50">
        <div class="flex items-center space-x-2">
            <div class="rounded-full h-5 w-5 flex items-center justify-center">
                <i class="fa fa-check text-green-400"></i>
            </div>
            <span>本地资源加载模式</span>
        </div>
        <div class="text-xs mt-2 text-gray-300">所有资源均已配置为本地或国内CDN加载</div>
        <div class="mt-3">
            <button id="close-info-btn" class="text-xs text-gray-300 hover:text-white transition-colors">
                关闭
            </button>
        </div>
    </div>
    
    <script>
        // 本地资源提示处理
        (function() {
            // 获取DOM元素
            const infoElement = document.getElementById('local-resource-info');
            const closeBtn = document.getElementById('close-info-btn');
            
            // 关闭提示函数
            function closeInfo() {
                if (infoElement) {
                    infoElement.style.transition = 'opacity 0.3s ease';
                    infoElement.style.opacity = '0';
                    setTimeout(() => {
                        infoElement.classList.add('hidden');
                    }, 300);
                }
            }
            
            // 添加事件监听器
            if (closeBtn) closeBtn.addEventListener('click', closeInfo);
            
            // 自动关闭提示
            setTimeout(() => {
                closeInfo();
            }, 5000);
        })();
    </script>
    
    <!-- 配置Tailwind - 主题社交配色方案 -->
    <!-- 延迟加载非关键脚本 -->
    <script>
        // 使用requestIdleCallback或setTimeout延迟加载非关键脚本
        const loadNonCriticalResources = () => {
            // 全局ESC键监听脚本（内联实现以避免额外请求）
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    // 处理ESC键逻辑
                    console.log('ESC键被按下');
                    // 关闭任何打开的模态框或下拉菜单
                    const openModals = document.querySelectorAll('.modal.open, .dropdown.open');
                    openModals.forEach(modal => modal.classList.remove('open'));
                }
            });
            
            // 移除百度统计外部链接，使用本地空函数替代
            /*
            if ('requestIdleCallback' in window) {
                requestIdleCallback(() => {
                    var _hmt = _hmt || [];
                    var hm = document.createElement("script");
                    hm.src = "https://hm.baidu.com/hm.js?your_tracking_code";
                    hm.async = true;
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(hm, s);
                });
            } else {
                setTimeout(() => {
                    var _hmt = _hmt || [];
                    var hm = document.createElement("script");
                    hm.src = "https://hm.baidu.com/hm.js?your_tracking_code";
                    hm.async = true;
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(hm, s);
                }, 2000);
            }
            */
        };
        
        // 页面加载后执行
        window.addEventListener('load', loadNonCriticalResources);
    </script>
    <script>
        // 安全地配置 Tailwind CSS，避免 ReferenceError
        if (typeof tailwind !== 'undefined') {
            tailwind.config = {
                theme: {
                    extend: {
                        colors: {
                            primary: '#9C27B0', // 紫色作为主色调，适合社交平台
                            secondary: '#165DFF', // 蓝色作为辅助色
                            accent: '#FF4081', // 粉色作为强调色
                            dark: '#1a1a2e', // 深色背景
                            darker: '#16213e', // 更深色
                            light: '#f8f9fa', // 浅色文本
                            'theme-purple': '#9C27B0',
                            'theme-blue': '#165DFF',
                            'theme-pink': '#FF4081'
                        },
                        fontFamily: {
                            sans: ['Inter', 'Helvetica Neue', 'Arial', 'sans-serif'],
                        },
                    }
                }
            };
        } else {
            console.warn('Tailwind CSS 未定义，跳过配置');
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-shadow {
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 0 15px rgba(156, 39, 176, 0.1);
            }
            .hover-scale {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .hover-scale:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15), 0 0 20px rgba(156, 39, 176, 0.2);
            }
            .hero-gradient {
                background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
            }
            .theme-glow {
                box-shadow: 0 0 15px rgba(156, 39, 176, 0.5), 0 0 30px rgba(22, 93, 255, 0.3);
            }
            .theme-border {
                border: 1px solid rgba(156, 39, 176, 0.5);
                box-shadow: 0 0 10px rgba(156, 39, 176, 0.2);
            }
            .nav-shadow {
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1), 0 0 20px rgba(156, 39, 176, 0.1);
            }
            .section-divider {
                height: 2px;
                background: linear-gradient(90deg, transparent, rgba(156, 39, 176, 0.5), transparent);
            }
            /* 深色主题样式 */
            .dark-bg {
                background-color: #1a1a2e;
            }
            .darker-bg {
                background-color: #16213e;
            }
            .dark-text {
                color: #e2e8f0;
            }
            .muted-text {
                color: #94a3b8;
            }
            .dark-card {
                background-color: #1e293b;
            }
            .dark-border {
                border-color: #334155;
            }
        }
    </style>
</head>
<body class="bg-dark dark-bg dark-text min-h-screen">
    <!-- 导航栏 - 深色简约风格 -->
    <header class="bg-dark fixed w-full top-0 z-50 nav-shadow">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- 网站Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center">
                        <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center mr-3 theme-glow">
                            <i class="fa fa-comments text-white text-xl"></i>
                        </div>
                        <span class="text-xl font-bold text-white">金零社</span>
                    </a>
                </div>
                
                <!-- 主导航菜单 - 桌面版 -->
                <div class="hidden md:flex space-x-6">
                    <a href="#features" class="text-white hover:text-primary px-3 py-2 text-sm font-medium transition-colors duration-200">主题社区</a>
                    <a href="#categories" class="text-white hover:text-primary px-3 py-2 text-sm font-medium transition-colors duration-200">兴趣圈子</a>
                    <a href="#quick-access" class="text-white hover:text-primary px-3 py-2 text-sm font-medium transition-colors duration-200">快速开始</a>
                </div>
                
                <!-- 用户区域 -->
                <div class="flex items-center space-x-4">
                    <!-- 用户按钮 -->
                    <button class="text-white hover:text-primary p-2 rounded-full hover:bg-white/10 transition-colors duration-200">
                        <i class="fa fa-user-circle text-lg"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- 内测阶段标记横幅 -->
    <div class="bg-red-600 text-white text-center py-3 px-4 font-bold text-sm md:text-base sticky top-16 z-40 shadow-md">
        <div class="max-w-7xl mx-auto flex items-center justify-center flex-wrap">
            <i class="fa fa-exclamation-triangle mr-2"></i>
            <span>警告：本网站目前处于内测阶段，尚未正式上线。内容可能随时更改或删除。</span>
            <i class="fa fa-exclamation-triangle ml-2"></i>
        </div>
    </div>
    
    <!-- 英雄区域 - 主题社交风格 -->
    <section class="hero-gradient pt-56 pb-24 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="inline-block p-4 bg-white/10 backdrop-blur-sm rounded-2xl mb-8 theme-glow">
                <i class="fa fa-users text-6xl"></i>
            </div>
            <h1 class="text-[clamp(2.5rem,6vw,4.5rem)] font-bold mb-6 leading-tight tracking-tight">
                <span class="text-primary">金零社</span>
            </h1>
            <p class="text-xl md:text-2xl mb-10 max-w-3xl mx-auto text-white/90">
                发现志同道合的朋友，基于共同兴趣爱好建立深度连接。在这里，每个主题都是一个社交圈子。
            </p>
            <div class="flex flex-wrap justify-center gap-4">
                <a href="#quick-access" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-lg transition-all duration-200 hover:scale-105 shadow-lg">
                    快速加入
                </a>
                <a href="#features" class="bg-transparent border-2 border-white hover:border-primary text-white hover:text-primary font-bold py-3 px-8 rounded-lg transition-all duration-200 hover:scale-105">
                    探索社区
                </a>
            </div>
        </div>
        
        <!-- 装饰性元素 - 社交风格波纹效果 -->
        <div class="absolute bottom-0 left-0 right-0 h-16 overflow-hidden">
            <div class="absolute bottom-0 left-0 right-0 bg-light transform translate-y-1/2">
                <svg viewBox="0 0 1440 120" class="w-full h-auto">
                    <path fill="currentColor" fill-opacity="1" d="M0,64L80,80C160,96,320,128,480,122.7C640,117,800,75,960,69.3C1120,64,1280,96,1360,112L1440,128L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z" style="color: #f5f5f5;"></path>
                </svg>
            </div>
        </div>
    </section>

    <!-- 快捷访问区域 - 增强版用户体验 -->
    <section id="quick-access" class="py-20 bg-gradient-to-b from-white to-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <div class="inline-block p-2 bg-accent/10 rounded-lg mb-4">
                    <i class="fa fa-bolt text-accent text-2xl"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-dark mb-4">快速加入</h2>
                <p class="text-gray-600 max-w-2xl mx-auto text-lg">快速加入你感兴趣的主题社区，开启社交之旅</p>
            </div>
            
            <!-- 默认功能选择器 - 社交风格升级版 -->
            <div class="bg-white rounded-xl p-8 mb-12 theme-border">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-8">
                    <div class="flex items-center">
                        <div class="w-14 h-14 bg-secondary/10 rounded-full flex items-center justify-center mr-5">
                            <i class="fa fa-star text-secondary text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-dark">选择常用社区</h3>
                <p class="text-gray-600">设置您常用的社区，提升访问效率</p>
                        </div>
                    </div>
                    
                    <div class="flex flex-wrap items-center gap-4">
                        <select id="default-feature-selector" class="bg-light border border-gray-300 text-gray-700 py-3 px-5 pr-10 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 text-sm md:text-base w-full md:w-auto">
                            <option value="">不启用</option>
                            <option value="module/index/mx_constellation_chat.html" selected>星座交流社区</option>
                            <option value="module/index/mx_zodiac_chat.html">生肖交流社区</option>
                            <option value="module/index/mx_chat.html">通用社交圈</option>
                            <option value="module/index/mx_live_stream.html">主题直播</option>
                            <option value="module/index/mx_days.html">重要日子记录</option>
                            <option value="module/index/mx_weather.html">地区天气分享</option>
                            <option value="module/index/mx_matrix.html">兴趣匹配系统</option>
                            <option value="module/index/mx_software_custom.html">技术支持中心</option>
                            <option value="company/assets/index.html">个人资产管理</option>
                            <option value="module/index/mx_qrcode_page.html">数字支付助手</option>
                            <option value="module/index/mx_task.html">任务中心</option>
                        </select>
                        <button id="save-default-feature" class="bg-primary hover:bg-primary/90 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 hover:scale-105">
                            保存设置
                        </button>
                        <button id="go-to-default-feature" class="bg-secondary hover:bg-secondary/90 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 hover:scale-105">
                            立即进入
                        </button>
                        <button id="go-to-default-feature-auto" class="bg-accent hover:bg-accent/90 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 hover:scale-105">
                            自动进入默认社区
                        </button>
                    </div>
                </div>
                <div id="feature-save-message" class="mt-4 text-sm text-green-600 hidden">
                    <i class="fa fa-check-circle mr-1"></i>默认社区设置已保存
                </div>
                <div class="mt-4 text-sm text-gray-600">
                    <p><i class="fa fa-info-circle mr-1"></i>说明：您可以设置常用社区作为默认页面。首次访问时，系统会自动跳转到默认社区页面。</p>
                    <p class="mt-1"><i class="fa fa-lightbulb-o mr-1"></i>提示：如果您想访问主页，请在URL后添加 <code>?home=true</code> 参数。</p>
                </div>
            </div>
            
        
        </div>
    </section>

    <!-- 核心推荐模块 - 突出展示主题社交 -->
    <section class="py-16 bg-gradient-to-r from-purple-50 to-blue-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <div class="inline-block p-2 bg-purple-100 rounded-lg mb-4">
                    <i class="fa fa-star text-purple-600 text-2xl"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-dark mb-4">热门社区</h2>
                <p class="text-gray-600 max-w-2xl mx-auto text-lg">我们最受欢迎的主题社交社区</p>
            </div>
            
            <!-- 突出展示星座交流社区 -->
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-16 hover-scale">
                <div class="md:flex">
                    <div class="md:w-2/5 bg-gradient-to-br from-purple-500 to-blue-500 p-8 flex flex-col justify-center">
                        <div class="text-white text-center">
                            <i class="fa fa-star-o text-5xl mb-4"></i>
                            <h3 class="text-2xl font-bold mb-2">星座交流社区</h3>
                            <p class="opacity-90">探索星座奥秘，结识有缘人</p>
                        </div>
                    </div>
                    <div class="md:w-3/5 p-8">
                        <h3 class="text-2xl font-bold text-dark mb-4">发现星座文化魅力，与志同道合的朋友交流</h3>
                        <p class="text-gray-600 mb-6">
                            加入我们的星座交流社区，与同样热爱星座文化的朋友们一起探讨星座奥秘，分享生活感悟，寻找志同道合的朋友。无论你是星座新手还是资深爱好者，这里都是你交流学习的理想场所。
                        </p>
                        <div class="flex flex-wrap gap-4 mb-6">
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm">星座文化</span>
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm">性格分析</span>
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm">话题讨论</span>
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm">交友匹配</span>
                        </div>
                        <a href="module/index/mx_constellation_chat.html" class="inline-block bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 hover:scale-105 shadow-lg">
                            立即体验 <i class="fa fa-arrow-right ml-2"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 社区分类区域 -->
    <section id="categories" class="py-20 bg-light relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <div class="inline-block p-2 bg-primary/10 rounded-lg mb-4">
                    <i class="fa fa-th-large text-primary text-2xl"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-dark mb-4">兴趣圈子</h2>
                <p class="text-gray-600 max-w-2xl mx-auto text-lg">探索基于不同主题的兴趣社区，找到属于你的社交圈子</p>
            </div>
            
            <!-- 分类导航 -->
            <div class="flex overflow-x-auto pb-4 mb-8 gap-4 scrollbar-hide">
                <button class="category-btn whitespace-nowrap px-6 py-2 rounded-full bg-primary text-white font-medium hover:bg-primary/90 transition-colors duration-200">全部社区</button>
                <button class="category-btn whitespace-nowrap px-6 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300 transition-colors duration-200">星座社区</button>
                <button class="category-btn whitespace-nowrap px-6 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300 transition-colors duration-200">生肖社区</button>
                <button class="category-btn whitespace-nowrap px-6 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300 transition-colors duration-200">兴趣爱好</button>
                <button class="category-btn whitespace-nowrap px-6 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300 transition-colors duration-200">生活分享</button>
            </div>
        </div>
    </section>
    
    <!-- 核心功能导航 - 增强版 -->
    <section id="features" class="py-16 bg-white relative">
        <!-- 装饰性背景元素 -->
        <div class="absolute top-0 left-0 w-full h-2 section-divider"></div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <div class="inline-block p-2 bg-secondary/10 rounded-lg mb-4">
                    <i class="fa fa-star text-secondary text-2xl"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-dark mb-4">主题社区</h2>
                <p class="text-gray-600 max-w-2xl mx-auto text-lg">我们的精选主题社区，为您提供专业、安全、有趣的社交体验</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="features-container">
                <!-- 功能卡片将动态显示 -->
            </div>
        </div>
        
        <div class="absolute bottom-0 left-0 w-full h-2 section-divider"></div>
    </section>

    <!-- 添加回到顶部按钮 -->
    <button id="back-to-top" class="fixed bottom-8 right-8 w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
        <i class="fa fa-arrow-up text-xl"></i>
    </button>

    <!-- 页脚 - 社交风格门户版 -->
    <footer class="bg-dark text-white py-16 relative">
        <!-- 装饰性顶部边框 -->
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent"></div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <!-- 品牌区域 -->
                <div class="md:col-span-1">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center mr-4 theme-glow">
                    <i class="fa fa-comments text-white text-2xl"></i>
                </div>
                <span class="text-2xl font-bold">金零社</span>
                    </div>
                    <p class="text-gray-400 mb-6">
                        专业主题社交平台，为用户提供基于兴趣爱好的社交服务，帮助用户建立深度连接
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-primary/20 transition-colors duration-200">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-primary/20 transition-colors duration-200">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-primary/20 transition-colors duration-200">
                            <i class="fa fa-instagram"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-primary/20 transition-colors duration-200">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                </div>
                
                <!-- 快速链接 -->
                <div>
                    <h4 class="text-lg font-semibold mb-6 text-primary">快速链接</h4>
                <ul class="space-y-3">
                    <li><a href="#features" class="text-gray-400 hover:text-white transition-colors duration-200">主题社区</a></li>
                    <li><a href="#categories" class="text-gray-400 hover:text-white transition-colors duration-200">兴趣圈子</a></li>
                    <li><a href="#quick-access" class="text-gray-400 hover:text-white transition-colors duration-200">快速开始</a></li>
                    <li><a href="module/index/mx_contact.html" class="text-gray-400 hover:text-white transition-colors duration-200">关于我们</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">帮助中心</a></li>
                </ul>
                </div>
                
                <!-- 联系方式 -->
                <div>
                    <h4 class="text-lg font-semibold mb-6 text-primary">联系我们</h4>
                <ul class="space-y-3">
                    <li class="flex items-center">
                        <i class="fa fa-envelope-o text-primary mr-3"></i>
                        <span class="text-gray-400">contact@jinlingshe.com</span>
                    </li>
                    <li class="flex items-center">
                        <i class="fa fa-phone text-primary mr-3"></i>
                        <span class="text-gray-400">400-888-9999</span>
                    </li>
                    <li class="flex items-center">
                        <i class="fa fa-map-marker text-primary mr-3"></i>
                        <span class="text-gray-400">上海市浦东新区陆家嘴社交中心</span>
                    </li>
                </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-500 mb-4 md:mb-0">© 2025 金零社主题社交平台. 保留所有权利.</p>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-500 hover:text-gray-400 transition-colors duration-200">隐私政策</a>
                    <a href="#" class="text-gray-500 hover:text-gray-400 transition-colors duration-200">使用条款</a>
                    <a href="#" class="text-gray-500 hover:text-gray-400 transition-colors duration-200">Cookie设置</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // 添加关键CSS内联 - 优先渲染首屏内容
        const criticalCSS = `
            body {
                font-family: 'Inter', sans-serif;
                margin: 0;
                padding: 0;
                background-color: #f8fafc;
            }
            .card-shadow {
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            }
            header {
                background-color: #0f172a;
                color: white;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                z-index: 40;
            }
            .hero-section {
                padding-top: 120px;
                padding-bottom: 80px;
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                color: white;
            }
        `;
        
        // 动态添加关键CSS
        const styleElement = document.createElement('style');
        styleElement.textContent = criticalCSS;
        document.head.appendChild(styleElement);
        
        // 函数防抖工具
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // 获取所有功能模块数据 - 核心模块优化版
        function getAllFeatures() {
            return [
                // 突出显示正在推广的通用社交圈
                {
                    id: 'mx_chat',
                    name: '通用社交圈',
                    description: '连接全球爱好者，分享见解和动态',
                    icon: 'fa-comments',
                    iconBgClass: 'bg-green-100',
                    iconColorClass: 'text-green-600',
                    link: 'module/index/mx_chat.html',
                    category: 'feature',
                    type: '兴趣爱好'
                },
                // 显示几个有前景的模块为"待启用"状态
                {
                    id: 'mx_constellation_chat',
                    name: '星座交流社区',
                    description: '探索星座奥秘，结识有缘人，分享星座文化魅力',
                    icon: 'fa-star-o',
                    iconBgClass: 'bg-purple-100',
                    iconColorClass: 'text-purple-600',
                    link: '#',
                    category: 'feature',
                    type: '星座社区',
                    disabled: true
                },
                {
                    id: 'mx_zodiac_chat',
                    name: '生肖交流社区',
                    description: '基于生肖文化建立连接，寻找志同道合的朋友',
                    icon: 'fa-paw',
                    iconBgClass: 'bg-blue-100',
                    iconColorClass: 'text-blue-600',
                    link: '#',
                    category: 'feature',
                    type: '生肖社区',
                    disabled: true
                },
                {
                    id: 'mx_live_stream',
                    name: '主题直播',
                    description: '实时主题直播，获取专家观点和社区互动',
                    icon: 'fa-video-camera',
                    iconBgClass: 'bg-pink-100',
                    iconColorClass: 'text-pink-600',
                    link: '#',
                    category: 'feature',
                    type: '生活分享',
                    disabled: true
                },
                // 隐藏其他模块（注释掉）
                /*
                {
                    id: 'mx_days',
                    name: '重要日子记录',
                    description: '记录和提醒重要日子，分享生活点滴',
                    icon: 'fa-calendar',
                    iconBgClass: 'bg-primary/10',
                    iconColorClass: 'text-primary',
                    link: 'module/index/mx_days.html',
                    category: 'feature',
                    type: '生活分享'
                },
                {
                    id: 'mx_weather',
                    name: '地区天气分享',
                    description: '关注地区天气，分享当地生活状态',
                    icon: 'fa-area-chart',
                    iconBgClass: 'bg-blue-100',
                    iconColorClass: 'text-blue-500',
                    link: 'module/index/mx_weather.html',
                    category: 'feature',
                    type: '生活分享'
                },
                {
                    id: 'mx_matrix',
                    name: '兴趣匹配系统',
                    description: '基于AI的兴趣匹配系统，发现志同道合的朋友',
                    icon: 'fa-shield',
                    iconBgClass: 'bg-purple-100',
                    iconColorClass: 'text-purple-600',
                    link: 'module/index/mx_matrix.html',
                    category: 'feature',
                    type: '技术支持'
                },
                {
                    id: 'mx_software_custom',
                    name: '技术支持中心',
                    description: '专业技术支持与咨询服务',
                    icon: 'fa-question-circle',
                    iconBgClass: 'bg-blue-100',
                    iconColorClass: 'text-blue-600',
                    link: 'module/index/mx_software_custom.html',
                    category: 'feature',
                    type: '技术支持'
                },
                {
                    id: 'company_assets',
                    name: '个人资产管理',
                    description: '智能个人资产管理工具，优化资产配置',
                    icon: 'fa-pie-chart',
                    iconBgClass: 'bg-blue-100',
                    iconColorClass: 'text-blue-600',
                    link: 'company/assets/index.html',
                    category: 'feature',
                    type: '生活分享'
                },
                {
                    id: 'mx_qrcode_page',
                    name: '数字支付助手',
                    description: '安全便捷的数字支付解决方案',
                    icon: 'fa-credit-card',
                    iconBgClass: 'bg-secondary/10',
                    iconColorClass: 'text-secondary',
                    link: 'module/index/mx_qrcode_page.html',
                    category: 'feature',
                    type: '生活分享'
                },
                {
                    id: 'mx_task',
                    name: '任务中心',
                    description: '完成任务获取积分，积分可兑换礼品',
                    icon: 'fa-tasks',
                    iconBgClass: 'bg-indigo-100',
                    iconColorClass: 'text-indigo-600',
                    link: 'module/index/mx_task.html',
                    category: 'feature',
                    type: '生活分享'
                }
                */
            ];
        }

        // 创建功能卡片 - 社交主题增强版
        function createFeatureCard(feature, index) {
            const card = document.createElement('a');
            card.href = feature.link;
            card.className = 'block bg-white rounded-xl p-6 hover-scale card-shadow border border-gray-100 transition-all duration-300 opacity-0 transform translate-y-4';
            
            // 如果功能被禁用，添加特殊样式
            if (feature.disabled) {
                card.classList.add('opacity-60', 'cursor-not-allowed');
                card.onclick = function(e) {
                    e.preventDefault();
                    // 显示提示信息
                    alert('该功能即将上线，敬请期待！');
                };
            }
            
            // 添加渐入动画 - 优化为有序延迟，减少随机性带来的性能波动
            setTimeout(() => {
                card.classList.remove('opacity-0', 'translate-y-4');
                card.classList.add('opacity-100', 'translate-y-0');
            }, 30 * index); // 使用索引计算延迟，保证有序且性能稳定
            
            // 存储页面信息，用于快速返回功能（仅对启用的功能）
            if (!feature.disabled) {
                card.addEventListener('click', function(e) {
                    try {
                        localStorage.setItem('last_visited_page', feature.link);
                        localStorage.setItem('last_visited_page_name', feature.name);
                    } catch (error) {
                        console.warn('无法保存页面信息到localStorage:', error);
                    }
                });
            }
            
            // 验证所有必要属性存在
            const safeIcon = feature.icon || 'fa-cog';
            const safeIconBgClass = feature.iconBgClass || 'bg-gray-100';
            const safeIconColorClass = feature.iconColorClass || 'text-gray-500';
            const safeType = feature.type || '未分类';
            const safeName = feature.name || '未命名社区';
            const safeDescription = feature.description || '暂无描述';
            
            // 如果功能被禁用，添加"待启用"标签
            const disabledBadge = feature.disabled ? 
                '<div class="inline-block px-3 py-1 bg-gray-200 text-xs font-medium text-gray-500 rounded-full mb-4">待启用</div>' : 
                `<div class="inline-block px-3 py-1 bg-gray-100 text-xs font-medium text-gray-700 rounded-full mb-4">${safeType}</div>`;
            
            card.innerHTML = `
                <div class="w-16 h-16 ${safeIconBgClass} rounded-full flex items-center justify-center mb-6 shadow-sm">
                    <i class="fa ${safeIcon} ${safeIconColorClass} text-2xl"></i>
                </div>
                ${disabledBadge}
                <h3 class="text-xl font-bold mb-3 text-dark">${safeName}</h3>
                <p class="text-gray-600 mb-6 line-clamp-2">${safeDescription}</p>
                <div class="flex items-center text-primary font-semibold group">
                    <span>${feature.disabled ? '敬请期待' : '立即加入'}</span>
                    ${feature.disabled ? '' : '<i class="fa fa-arrow-right ml-2 transition-transform duration-200 group-hover:translate-x-1"></i>'}
                </div>
            `;
            
            return card;
        }

        // 渲染功能模块 - 支持分类筛选和加载状态
        function renderFeatures(filterType = '全部产品') {
            const featuresContainer = document.getElementById('features-container');
            
            try {
                // 添加加载状态
                featuresContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"></div>
                        <p class="text-gray-600">加载中，请稍候...</p>
                    </div>
                `;
                
                // 移除不必要的延迟，立即执行以加快响应
                try {
                    const allFeatures = getAllFeatures();
                    
                    // 根据筛选类型过滤功能
                    const filteredFeatures = filterType === '全部社区' 
                        ? allFeatures 
                        : allFeatures.filter(feature => feature.type === filterType);
                    
                    // 清空容器
                    featuresContainer.innerHTML = '';
                        
                        // 如果没有找到功能，显示空状态
                        if (filteredFeatures.length === 0) {
                            featuresContainer.innerHTML = `
                                <div class="col-span-full text-center py-12">
                                    <div class="inline-block p-6 bg-gray-100 rounded-full mb-4">
                                        <i class="fa fa-search text-gray-400 text-3xl"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold text-gray-800 mb-2">未找到相关社区</h3>
                                    <p class="text-gray-500">请尝试选择其他分类或返回全部社区</p>
                                </div>
                            `;
                            return;
                        }
                        
                        // 显示过滤后的功能
                        filteredFeatures.forEach((feature, index) => {
                            const card = createFeatureCard(feature, index);
                            // 为每张卡片添加唯一ID，方便测试和调试
                            card.id = `feature-card-${feature.id || index}`;
                            featuresContainer.appendChild(card);
                        });
                    } catch (error) {
                        console.error('渲染功能时出错:', error);
                        featuresContainer.innerHTML = `
                            <div class="col-span-full text-center py-12">
                                <div class="inline-block p-6 bg-red-50 rounded-full mb-4">
                                    <i class="fa fa-exclamation-circle text-red-400 text-3xl"></i>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-2">加载失败</h3>
                                <p class="text-gray-500">请刷新页面重试</p>
                                <button onclick="renderFeatures('${filterType.replace(/'/g, "\\'")}')" class="mt-4 bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors">
                                    重试
                                </button>
                            </div>
                        `;
                    }
                // 移除不必要的延迟，提高响应速度
            } catch (error) {
                console.error('初始化渲染时出错:', error);
                featuresContainer.innerHTML = `<div class="text-center py-12 text-gray-500">加载社区列表失败</div>`;
            }
        }
        
        // 初始化分类筛选功能
        function initCategoryFilters() {
            const categoryBtns = document.querySelectorAll('.category-btn');
            
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // 更新按钮样式
                    categoryBtns.forEach(b => {
                        b.classList.remove('bg-primary', 'text-white');
                        b.classList.add('bg-gray-200', 'text-gray-700');
                    });
                    this.classList.remove('bg-gray-200', 'text-gray-700');
                    this.classList.add('bg-primary', 'text-white');
                    
                    // 渲染对应分类的产品
                    renderFeatures(this.textContent.trim());
                });
            });
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化分类筛选功能
            initCategoryFilters();
            
            // 渲染功能模块
            renderFeatures();
            
            // 初始化默认功能选择器
            initDefaultFeatureSelector();
            
            // 检查URL参数跳转
            checkUrlParamRedirect();
            
            // 检查是否需要自动跳转到默认功能
            checkAndRedirectToDefaultFeature();
            
            // 默认功能保存按钮点击事件
            document.getElementById('save-default-feature').addEventListener('click', function() {
                const selectedFeature = document.getElementById('default-feature-selector').value;
                localStorage.setItem('default_feature', selectedFeature);
                
                // 显示保存成功提示
                const messageEl = document.getElementById('feature-save-message');
                messageEl.classList.remove('hidden');
                
                // 添加动画效果
                messageEl.classList.add('animate-pulse');
                setTimeout(() => {
                    messageEl.classList.remove('animate-pulse');
                    messageEl.classList.add('hidden');
                }, 3000);
            });
            
            // 立即跳转按钮点击事件
            document.getElementById('go-to-default-feature').addEventListener('click', function() {
                const selectedFeature = document.getElementById('default-feature-selector').value;
                
                // 如果选择了功能，则立即跳转
                if (selectedFeature) {
                    window.location.href = selectedFeature;
                } else {
                    // 显示提示信息
                    const messageEl = document.getElementById('feature-save-message');
                    messageEl.textContent = '请先选择一个默认社区';
                    messageEl.classList.remove('hidden', 'text-green-600');
                    messageEl.classList.add('text-red-600', 'animate-pulse');
                    
                    // 3秒后恢复原来的样式
                    setTimeout(() => {
                        messageEl.textContent = '默认社区设置已保存';
                        messageEl.classList.add('hidden', 'text-green-600');
                        messageEl.classList.remove('text-red-600', 'animate-pulse');
                    }, 3000);
                }
            });
            
            // 自动跳转到默认功能按钮点击事件
            document.getElementById('go-to-default-feature-auto').addEventListener('click', function() {
                // 设置访问标记，表示用户已经访问过主页
                localStorage.setItem('has_visited_homepage', 'true');
                
                // 获取默认功能设置
                const defaultFeature = localStorage.getItem('default_feature') || 'module/index/mx_constellation_chat.html';
                
                // 如果设置了默认功能且不是空值，则立即跳转
                if (defaultFeature && defaultFeature !== '') {
                    window.location.href = defaultFeature;
                } else {
                    // 如果没有设置默认功能，跳转到星座交流社区
                    window.location.href = 'module/index/mx_constellation_chat.html';
                }
            });
            
            // 添加滚动进度指示器
            addScrollProgressIndicator();
            
            // 优化事件监听处理
            optimizeEventListeners();
            
            // 修复固定导航栏遮挡问题
            fixHashScrolling();
            
            // 初始化回到顶部按钮
            initBackToTopButton();
            
            // 使用requestIdleCallback延迟非关键初始化，避免阻塞主线程
            const initNonCritical = () => {
                // 优化图片加载
                optimizeImages();
                
                // 设置性能监控
                setupPerformanceMonitoring();
                
                // 事件委托处理按钮点击
                const quickAccessSection = document.getElementById('quick-access');
                if (quickAccessSection) {
                    quickAccessSection.addEventListener('click', function(e) {
                        // 保存设置按钮
                        if (e.target.closest('#save-default-feature')) {
                            const selectedFeature = document.getElementById('default-feature-selector').value;
                            localStorage.setItem('default_feature', selectedFeature);
                            
                            // 显示保存成功提示
                            const messageEl = document.getElementById('feature-save-message');
                            messageEl.textContent = '默认社区设置已保存';
                            messageEl.classList.remove('hidden', 'text-red-600');
                            messageEl.classList.add('text-green-600', 'animate-pulse');
                            
                            // 使用requestAnimationFrame优化动画
                            requestAnimationFrame(() => {
                                setTimeout(() => {
                                    messageEl.classList.remove('animate-pulse');
                                    messageEl.classList.add('hidden');
                                }, 2000); // 减少显示时间
                            });
                        }
                        
                        // 立即跳转按钮
                        if (e.target.closest('#go-to-default-feature')) {
                            const selectedFeature = document.getElementById('default-feature-selector').value;
                            
                            // 如果选择了功能，则立即跳转
                            if (selectedFeature) {
                                window.location.href = selectedFeature;
                            } else {
                                // 显示提示信息
                                const messageEl = document.getElementById('feature-save-message');
                                messageEl.textContent = '请先选择一个默认社区';
                                messageEl.classList.remove('hidden', 'text-green-600');
                                messageEl.classList.add('text-red-600', 'animate-pulse');
                                
                                // 2秒后恢复原来的样式
                                requestAnimationFrame(() => {
                                    setTimeout(() => {
                                        messageEl.textContent = '默认社区设置已保存';
                                        messageEl.classList.add('hidden', 'text-green-600');
                                        messageEl.classList.remove('text-red-600', 'animate-pulse');
                                    }, 2000);
                                });
                            }
                        }
                        
                        // 自动跳转到默认功能按钮
                        if (e.target.closest('#go-to-default-feature-auto')) {
                            // 设置访问标记，表示用户已经访问过主页
                            localStorage.setItem('has_visited_homepage', 'true');
                            
                            // 获取默认功能设置
                            const defaultFeature = localStorage.getItem('default_feature') || 'module/index/mx_constellation_chat.html';
                            
                            // 如果设置了默认功能且不是空值，则立即跳转
                            if (defaultFeature && defaultFeature !== '') {
                                window.location.href = defaultFeature;
                            } else {
                                // 如果没有设置默认功能，跳转到星座交流社区
                                window.location.href = 'module/index/mx_constellation_chat.html';
                            }
                        }
                    });
                }
                
                // 防抖处理页面可见性变化
                const handleVisibilityChange = debounce(() => {
                    if (document.visibilityState === 'visible') {
                        console.log('页面重新可见');
                        // 只在必要时刷新数据，避免不必要的重新加载
                    }
                }, 1000);
                
                document.addEventListener('visibilitychange', handleVisibilityChange);
            };
            
            // 优先执行非关键初始化
            if ('requestIdleCallback' in window) {
                requestIdleCallback(initNonCritical);
            } else {
                // 降级方案 - 延迟执行但不阻塞
                setTimeout(initNonCritical, 100);
            }
        });
        
        // 添加缓存控制和资源优化
        (function() {
            // 尝试使用Service Worker进行资源缓存（如果支持）
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js').catch(error => {
                        console.warn('Service Worker注册失败:', error);
                    });
                });
            }
        })();
        
        // 修复控制台中关于<meta name="apple-mobile-web-app-capable">的警告
        function fixMetaTagWarning() {
            const oldMetaTag = document.querySelector('meta[name="apple-mobile-web-app-capable"]');
            if (oldMetaTag) {
                const newMetaTag = document.createElement('meta');
                newMetaTag.name = 'mobile-web-app-capable';
                newMetaTag.content = 'yes';
                document.head.appendChild(newMetaTag);
            }
        }
        
        // 页面加载完成后修复警告
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', fixMetaTagWarning);
        } else {
            fixMetaTagWarning();
        }
        
        // 优化事件监听处理
        function optimizeEventListeners() {
            // 使用事件委托处理导航链接，减少事件监听器数量
            const navContainer = document.querySelector('header nav');
            if (navContainer) {
                navContainer.addEventListener('click', function(e) {
                    const target = e.target.closest('a');
                    if (target && target.getAttribute('href') && target.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        const targetId = target.getAttribute('href');
                        
                        // 防止无效的锚点
                        if (targetId === '#') return;
                        
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            // 考虑固定导航栏的高度
                            const navbarHeight = 64;
                            const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - navbarHeight;
                            
                            // 平滑滚动
                            window.scrollTo({
                                top: targetPosition,
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    }
                });
            }
        }
        
        // 修复固定导航栏遮挡问题
        function fixHashScrolling() {
            const hash = window.location.hash;
            if (hash) {
                const targetElement = document.querySelector(hash);
                if (targetElement) {
                    // 使用requestAnimationFrame优化滚动性能
                    requestAnimationFrame(() => {
                        const navbarHeight = 64;
                        const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - navbarHeight;
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    });
                }
            }
        }

        // 初始化默认功能选择器 - 增加错误处理
        function initDefaultFeatureSelector() {
            try {
                const selector = document.getElementById('default-feature-selector');
                if (!selector) {
                    console.warn('未找到默认功能选择器元素');
                    return;
                }
                
                let savedFeature = '';
                try {
                    savedFeature = localStorage.getItem('default_feature') || 'module/index/mx_constellation_chat.html';
                } catch (storageError) {
                    console.warn('无法从localStorage获取数据:', storageError);
                    // 默认设置为星座交流社区
                    savedFeature = 'module/index/mx_constellation_chat.html';
                }
                
                // 设置选择器的值
                selector.value = savedFeature;
            } catch (error) {
                console.error('初始化默认功能选择器时出错:', error);
            }
        }
        
        // 读取本地homepage_default_config.json配置文件
        async function loadHomepageConfig() {
            try {
                // 修改为从本地文件加载配置文件
                const response = await fetch('/agent/data/homepage_default_config.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const config = await response.json();
                return config;
            } catch (error) {
                console.error('读取homepage_default_config.json配置文件时出错:', error);
                // 如果无法读取配置文件，返回null
                return null;
            }
        }

        // 根据feature_id获取对应的页面链接
        function getFeatureLinkById(featureId) {
            const allFeatures = getAllFeatures();
            const feature = allFeatures.find(f => f.id === featureId);
            return feature ? feature.link : null;
        }

        // 检查URL参数跳转 - 新增功能
        function checkUrlParamRedirect() {
            // 获取URL参数
            const urlParams = new URLSearchParams(window.location.search);
            const moduleParam = urlParams.get('t');
            
            // 如果没有模块参数，直接返回
            if (!moduleParam) return;
            
            // 定义模块映射关系
            const moduleMap = {
                'proxy': 'module/index/mx_chat.html',
                'stock': 'module/index/mx_constellation_chat.html',
                'live': 'module/index/mx_live_stream.html',
                'days': 'module/index/mx_days.html',
                'weather': 'module/index/mx_weather.html',
                'matrix': 'module/index/mx_matrix.html',
                'support': 'module/index/mx_software_custom.html',
                'assets': 'company/assets/index.html',
                'pay': 'module/index/mx_qrcode_page.html',
                'task': 'module/index/mx_task.html'
            };
            
            // 获取目标链接
            const targetLink = moduleMap[moduleParam];
            
            // 如果找到对应模块，执行跳转
            if (targetLink) {
                // 构造带所有参数的完整URL
                let redirectUrl = targetLink;
                
                // 保留除t以外的所有参数
                const allParams = new URLSearchParams(window.location.search);
                allParams.delete('t');
                
                // 如果还有其他参数，附加到跳转链接
                const otherParams = allParams.toString();
                if (otherParams) {
                    redirectUrl += '?' + otherParams;
                }
                
                // 执行跳转
                window.location.href = redirectUrl;
            }
        }

        // 检查并自动跳转到默认功能 - 增强版（基于本地配置文件）
        async function checkAndRedirectToDefaultFeature() {
            try {
                // 检查是否是从其他页面返回到首页的情况
                const lastVisitedPage = localStorage.getItem('last_visited_page');
                
                // 如果是从具体功能页面返回，不自动跳转
                if (lastVisitedPage && lastVisitedPage !== 'index.html' && lastVisitedPage !== window.location.pathname) {
                    // 清除最后访问页面信息
                    localStorage.removeItem('last_visited_page');
                    return;
                }
                
                // 检查用户是否明确想要访问主页本身
                // 通过查询参数?home=true来标识用户明确想要访问主页
                const urlParams = new URLSearchParams(window.location.search);
                if (urlParams.has('home')) {
                    console.log('用户明确想要访问主页，不进行自动跳转');
                    return;
                }
                            
                // 检查是否有模块跳转参数
                if (urlParams.has('t')) {
                    console.log('检测到模块跳转参数，不进行默认功能跳转');
                    return;
                }
                
                // 检查是否是第一次访问主页（通过localStorage中的访问标记判断）
                const hasVisitedBefore = localStorage.getItem('has_visited_homepage');
                if (hasVisitedBefore) {
                    // 如果不是第一次访问，不自动跳转
                    console.log('用户不是第一次访问主页，不进行自动跳转');
                    return;
                }
                
                // 检查当前是否直接访问的就是index.html
                const isDirectIndexAccess = window.location.pathname.endsWith('index.html') || 
                                          window.location.pathname === '/' || 
                                          window.location.pathname === '';
                
                // 如果不是直接访问index.html，不自动跳转
                if (!isDirectIndexAccess) {
                    return;
                }
                
                // 确保在跳转前完成配置文件的加载和解析
                console.log('开始加载本地默认功能配置文件...');
                const homepageConfig = await loadHomepageConfig();
                console.log('本地默认功能配置文件加载完成:', homepageConfig);
                
                // 如果成功读取到配置
                if (homepageConfig) {
                    // 获取配置中的默认功能ID
                    const defaultFeatureId = homepageConfig.default_feature_id;
                    
                    // 根据feature_id获取对应的页面链接
                    const defaultFeatureLink = getFeatureLinkById(defaultFeatureId);
                    
                    // 检查是否需要强制替换
                    // 检查是否需要强制替换
                    const forceOverride = homepageConfig.force_override;
                    
                    // 获取本地存储中的当前默认功能
                    const currentDefaultFeature = localStorage.getItem('default_feature');
                    
                    // 如果配置要求强制替换，或者当前没有设置默认功能，则更新默认功能
                    if (forceOverride || !currentDefaultFeature) {
                        if (defaultFeatureLink) {
                            // 将新的默认功能设置更新到本地缓存中
                            localStorage.setItem('default_feature', defaultFeatureLink);
                            console.log('已更新默认功能到本地缓存:', defaultFeatureLink);
                            
                            // 设置访问标记，表示用户已经访问过主页
                            localStorage.setItem('has_visited_homepage', 'true');
                            
                            // 自动跳转到默认功能页面
                            setTimeout(() => {
                                console.log('跳转到默认功能页面:', defaultFeatureLink);
                                window.location.href = defaultFeatureLink;
                            }, 1000);
                            return;
                        }
                    }
                    
                    // 如果没有强制替换要求，但本地存储中已有默认功能，则使用本地存储的设置
                    if (!forceOverride && currentDefaultFeature && currentDefaultFeature !== '') {
                        // 设置访问标记，表示用户已经访问过主页
                        localStorage.setItem('has_visited_homepage', 'true');
                        
                        // 延迟跳转，让用户能看到页面
                        setTimeout(() => {
                            console.log('跳转到本地缓存的默认功能页面:', currentDefaultFeature);
                            window.location.href = currentDefaultFeature;
                        }, 1000);
                        return;
                    }
                }
                
                // 如果无法读取配置文件或配置中没有有效的默认功能，则使用原来的逻辑
                // 获取默认功能设置
                const defaultFeature = localStorage.getItem('default_feature');
                
                // 如果设置了默认功能且不是空值，则自动跳转
                if (defaultFeature && defaultFeature !== '') {
                    // 设置访问标记，表示用户已经访问过主页
                    localStorage.setItem('has_visited_homepage', 'true');
                    
                    // 稍微延迟跳转，让用户能看到页面
                    setTimeout(() => {
                        console.log('跳转到本地默认功能页面:', defaultFeature);
                        window.location.href = defaultFeature;
                    }, 1000);
                } else {
                    // 如果没有设置默认功能，设置星座交流社区为默认功能
                    localStorage.setItem('default_feature', 'module/index/mx_constellation_chat.html');
                    console.log('设置星座交流社区为默认功能');
                    
                    // 设置访问标记，表示用户已经访问过主页
                    localStorage.setItem('has_visited_homepage', 'true');
                    
                    // 延迟跳转到星座交流社区
                    setTimeout(() => {
                        window.location.href = 'module/index/mx_constellation_chat.html';
                    }, 1000);
                }
            } catch (error) {
                console.error('检查并跳转到默认功能时出错:', error);
                // 出错时使用原来的逻辑作为降级方案
                const defaultFeature = localStorage.getItem('default_feature') || 'module/index/mx_constellation_chat.html';
                
                // 设置访问标记，表示用户已经访问过主页
                localStorage.setItem('has_visited_homepage', 'true');
                
                setTimeout(() => {
                    window.location.href = defaultFeature;
                }, 1000);
            }
        }
        
        // 添加滚动进度指示器
        function addScrollProgressIndicator() {
            const progressBar = document.createElement('div');
            progressBar.id = 'scroll-progress';
            progressBar.className = 'fixed top-0 left-0 h-1 bg-primary z-50 transition-all duration-200';
            document.body.appendChild(progressBar);
            
            window.addEventListener('scroll', function() {
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (winScroll / height) * 100;
                progressBar.style.width = scrolled + '%';
            });
        }
        
        // 添加回到顶部按钮功能
        function initBackToTopButton() {
            const backToTopButton = document.getElementById('back-to-top');
            
            if (backToTopButton) {
                // 监听滚动事件
                window.addEventListener('scroll', function() {
                    if (window.pageYOffset > 300) {
                        // 显示按钮
                        backToTopButton.classList.remove('translate-y-20', 'opacity-0');
                        backToTopButton.classList.add('translate-y-0', 'opacity-100');
                    } else {
                        // 隐藏按钮
                        backToTopButton.classList.add('translate-y-20', 'opacity-0');
                        backToTopButton.classList.remove('translate-y-0', 'opacity-100');
                    }
                });
                
                // 点击事件
                backToTopButton.addEventListener('click', function() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
        }
        
        // 优化图片加载
        function optimizeImages() {
            // 获取所有图片
            const images = Array.from(document.querySelectorAll('img'));
            
            // 批量处理函数，使用requestAnimationFrame避免阻塞主线程
            function processImagesInBatches(imagesArray, batchSize = 5, callback) {
                let index = 0;
                
                function processBatch() {
                    const batch = imagesArray.slice(index, index + batchSize);
                    
                    batch.forEach(img => {
                        callback(img);
                    });
                    
                    index += batchSize;
                    
                    if (index < imagesArray.length) {
                        requestAnimationFrame(processBatch);
                    }
                }
                
                requestAnimationFrame(processBatch);
            }
            
            // 处理函数：添加懒加载和错误处理
            function processImage(img) {
                // 添加延迟加载属性 - 对于现代浏览器
                if (!img.hasAttribute('loading') && typeof img.loading !== 'undefined') {
                    img.setAttribute('loading', 'lazy');
                }
                
                // 对于不支持loading属性的浏览器，使用IntersectionObserver实现懒加载
                if (!img.complete && !img.hasAttribute('data-lazy-processed')) {
                    img.setAttribute('data-lazy-processed', 'true');
                    
                    if ('IntersectionObserver' in window) {
                        const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                if (entry.isIntersecting) {
                                    const lazyImage = entry.target;
                                    
                                    // 如果有data-src属性，则使用它作为实际源
                                    if (lazyImage.hasAttribute('data-src')) {
                                        lazyImage.src = lazyImage.getAttribute('data-src');
                                        lazyImage.removeAttribute('data-src');
                                    }
                                    
                                    observer.unobserve(lazyImage);
                                }
                            });
                        }, { rootMargin: '50px' }); // 添加预加载区域
                        
                        observer.observe(img);
                    }
                }
                
                // 添加错误处理 - 确保不会重复添加事件监听器
                if (!img.hasAttribute('data-error-handled')) {
                    img.setAttribute('data-error-handled', 'true');
                    
                    img.addEventListener('error', function onError() {
                        // 移除事件监听器防止重复触发
                        img.removeEventListener('error', onError);
                        
                        // 使用轻量级SVG占位图替代外部图片，减少额外请求
                        img.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"%3E%3Crect width="100" height="100" fill="%23e2e8f0"%3E%3C/rect%3E%3Ctext x="50" y="50" font-family="Arial" font-size="14" text-anchor="middle" dominant-baseline="middle" fill="%2394a3b8"%3E图片加载失败%3C/text%3E%3C/svg%3E';
                        img.alt = '图片加载失败';
                        
                        // 为图片添加错误样式
                        img.style.opacity = '0.7';
                    });
                }
                
                // 压缩图片（针对本地图片）
                if (img.src.startsWith(window.location.origin) && !img.hasAttribute('data-optimized')) {
                    img.setAttribute('data-optimized', 'true');
                    
                    // 设置合理的响应式样式
                    img.style.maxWidth = '100%';
                    img.style.height = 'auto';
                }
            }
            
            // 分批处理所有图片
            processImagesInBatches(images, 5, processImage);
        }
        
        // 性能监控 - 优化版
        function setupPerformanceMonitoring() {
            if ('performance' in window && 'measure' in window.performance) {
                try {
                    // 使用requestIdleCallback避免影响主线程
                    if ('requestIdleCallback' in window) {
                        requestIdleCallback(() => {
                            window.addEventListener('load', function() {
                                // 测量关键性能指标
                                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                                const domReadyTime = performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart;
                                console.log(`页面加载时间: ${loadTime}ms`);
                                console.log(`DOM就绪时间: ${domReadyTime}ms`);
                            });
                        });
                    } else {
                        // 降级方案
                        window.addEventListener('load', function() {
                            const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                            console.log(`页面加载时间: ${loadTime}ms`);
                        });
                    }
                } catch (error) {
                    console.warn('性能监控初始化失败:', error);
                }
            }
        }
        
        // 初始化移动导航菜单
        function initMobileNavigation() {
            // 检查是否已存在汉堡菜单，如果没有则创建
            let mobileMenuButton = document.querySelector('.mobile-menu-button');
            if (!mobileMenuButton) {
                // 创建汉堡菜单按钮
                mobileMenuButton = document.createElement('button');
                mobileMenuButton.className = 'mobile-menu-button md:hidden text-white p-2 rounded-lg hover:bg-white/10 transition-colors';
                mobileMenuButton.innerHTML = '<i class="fa fa-bars text-xl"></i>';
                
                // 将按钮添加到导航栏
                const navContainer = document.querySelector('header nav div.flex');
                if (navContainer) {
                    navContainer.appendChild(mobileMenuButton);
                }
            }
            
            // 创建移动菜单容器
            let mobileMenu = document.querySelector('.mobile-menu');
            if (!mobileMenu) {
                mobileMenu = document.createElement('div');
                mobileMenu.className = 'mobile-menu hidden md:hidden absolute top-full left-0 right-0 bg-dark border-t border-gray-800 shadow-lg z-50';
                
                // 复制桌面导航菜单链接
                const desktopNavLinks = document.querySelectorAll('header nav div.hidden.md\:flex a');
                const navLinksContainer = document.createElement('div');
                navLinksContainer.className = 'px-4 py-3 space-y-3';
                
                desktopNavLinks.forEach(link => {
                    const mobileLink = document.createElement('a');
                    mobileLink.href = link.href;
                    mobileLink.textContent = link.textContent;
                    mobileLink.className = 'block text-white hover:text-primary px-3 py-2 rounded-lg hover:bg-white/10 transition-colors';
                    navLinksContainer.appendChild(mobileLink);
                });
                
                mobileMenu.appendChild(navLinksContainer);
                
                // 将移动菜单添加到导航栏下方
                const header = document.querySelector('header');
                if (header) {
                    header.appendChild(mobileMenu);
                }
            }
            
            // 添加点击事件
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
                // 切换图标
                const icon = mobileMenuButton.querySelector('i');
                if (mobileMenu.classList.contains('hidden')) {
                    icon.className = 'fa fa-bars text-xl';
                } else {
                    icon.className = 'fa fa-times text-xl';
                }
            });
            
            // 点击菜单项后关闭菜单
            const mobileMenuLinks = mobileMenu.querySelectorAll('a');
            mobileMenuLinks.forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenu.classList.add('hidden');
                    const icon = mobileMenuButton.querySelector('i');
                    icon.className = 'fa fa-bars text-xl';
                });
            });
        }
        
        // 显示版本信息函数
        function showVersionInfo() {
            // 默认版本信息
            let version = 'v1.0.0-6f72485';
            let gitTimestamp = '2025-11-11 10:34:31 +0800';
            
            // 尝试从JSON文件中获取版本信息
            try {
                const xhr = new XMLHttpRequest();
                xhr.open('GET', '/agent/data/version_info.json', false); // 同步请求
                xhr.send(null);
                
                if (xhr.status === 200) {
                    const versionInfo = JSON.parse(xhr.responseText);
                    version = versionInfo.version + '-' + versionInfo.commit_hash;
                    gitTimestamp = versionInfo.commit_timestamp;
                }
            } catch (e) {
                console.warn('无法加载版本信息文件，使用默认值:', e);
            }
            
            // 检查是否已经存在版本信息弹出层
            let versionDiv = document.getElementById('version-info-popup');
            if (!versionDiv) {
                // 创建版本信息弹出层
                versionDiv = document.createElement('div');
                versionDiv.id = 'version-info-popup';
                versionDiv.innerHTML = `
                    <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                                background: rgba(0, 0, 0, 0.85); color: white; padding: 20px; border-radius: 10px; 
                                z-index: 10000; text-align: center; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                                animation: fadeInOut 1.5s ease-in-out;">
                        <div style="font-size: 18px; margin-bottom: 10px;">金零社主题社交平台</div>
                        <div style="font-size: 14px; opacity: 0.8;">版本: ${version}</div>
                        <div style="font-size: 12px; opacity: 0.6; margin-top: 8px;">更新时间: ${gitTimestamp}</div>
                    </div>
                    <style>
                        @keyframes fadeInOut {
                            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                            20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                        }
                    </style>
                `;
                
                // 添加到页面中
                document.body.appendChild(versionDiv);
                
                // 1.5秒后自动移除
                setTimeout(() => {
                    if (versionDiv.parentNode) {
                        versionDiv.parentNode.removeChild(versionDiv);
                    }
                }, 1500);
            }
        }
        
        // 暴露到全局作用域
        window.showVersionInfo = showVersionInfo;

    </script>
</body>
</html>